# calculator-lipatov-ad

## Описание

Программа выполняет разбор и вычисление арифметического выражения, введённого пользователем при помощи стекового разбора.

### Поддерживаемые функции:

- Ввод выражения через `stdin`
- Вывод ответа через `stdout`
- Максимальная длина выражения — **1024 символа** (иначе `UB`)
- Конец ввода обозначается символом `EOF`
- Принимаются только корректные арифметические выражения
- В выражении поддерживаются только целые неотрицательные числа в диапазоне [0...2x10<sup>9</sup>] (иначе `UB`)
- Операции: `+`, `-`, `*`, `/`
- Скобки `(` и `)`
- Игнорирование пробелов
- Поддержка флага `--float`, который переводит вычисления в числа с плавающей точкой

Деление на числа меньшие 2x10<sup>-9</sup> по модулю, а также выход за пределы диапазона [-2x10<sup>9</sup>...+2x10<sup>9</sup>] во время промежуточных вычислений приводит к `UB` в любом режиме.



## Использование программы

Чтобы запустить программу, необходимо:
1. Скопировать репозиторий
2. Набрать команду `make run-int` для запуска программы в обычном режиме
3. Набрать команду `make run-float` для запуска программы в режиме чисел с плавающей точкой
4. Ввести выражение в терминал и обозначить конец ввода (`Ctrl + D` в ОС Linux)
5. Получить результат
6. Ввести `make clean` для очистки файлов, полученных во время работы

## Алгоритм

Для вычисления выражения используется стековый разбор с двумя стеками:

- `num_stack` — для чисел
- `op_stack` — для операций и скобок

### Основные шаги:

1. Числа помещаются в `num_stack`.
2. Операции обрабатываются с учётом приоритета:
    - `*` и `/` выполняются раньше `+` и `-`
    - Если в `op_stack` есть операция с равным или большим приоритетом, выполняется вычисление
3. `(` добавляется в `op_stack` без вычислений
4. `)` запускает обработку выражения до ближайшей `(`
5. В конце выражения выполняются оставшиеся операции, результат выводится в терминал
